<h1>Listing Users</h1>

<div ng-app="app">
  <div ng-controller="usersCtrl" ng-init="setupUsersIndex()">

    <%= link_to 'New User', new_user_path, class: "btn btn-default" %>
    <br><br>
    <form class="form-inline">
      <div class="form-group">
        <input type="text" ng-model="search" class="form-control" placeholder="Search">
      </div>
    </form>
    <br>
    <div class="bs-component">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th ng-click="sort('first_name')">First Name
              <span class="glyphicon sort-icon" ng-show="sortKey=='first_name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
            <th ng-click="sort('last_name')">Last Name
              <span class="glyphicon sort-icon" ng-show="sortKey=='last_name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
            <th ng-click="sort('email')">Email
              <span class="glyphicon sort-icon" ng-show="sortKey=='email'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
            <th ng-click="sort('current_title')">Current Title
              <span class="glyphicon sort-icon" ng-show="sortKey=='current_title'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
            <th ng-click="sort('current_employer')">Current Employer
              <span class="glyphicon sort-icon" ng-show="sortKey=='current_employer'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
            <th ng-click="sort('graduation_date')">Graduation Date
              <span class="glyphicon sort-icon" ng-show="sortKey=='graduation_date'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
            <th ng-click="sort('cohort.name')">Cohort
              <span class="glyphicon sort-icon" ng-show="sortKey=='cohort.name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>
            <tr ng-repeat="user in users | orderBy:sortKey:reverse | filter:search">
              <td>{{user.first_name}}</td>
              <td>{{user.last_name}}</td>
              <td>{{user.email}}</td>
              <td>{{user.current_title}}</td>
              <td>{{user.current_employer}}</td>
              <td>{{user.friendly_grad_date}}</td>
              <td>{{user.cohort.name}}</td>
              <td><a href="/users/{{user.id}}" class="btn btn-default">Show</a></td>
              <td><a href="/users/{{user.id}}/edit" class="btn btn-default">Edit</a></td>
              <td><a href="/users/{{user.id}}/edit" data-method="delete" data-confirm="Are you sure you want to delete user: {{user.full_name}}" class="btn btn-default">Delete</a></td>             
            </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>